(function(t){function e(e){for(var i,s,h=e[0],c=e[1],o=e[2],l=0,d=[];l<h.length;l++)s=h[l],Object.prototype.hasOwnProperty.call(n,s)&&n[s]&&d.push(n[s][0]),n[s]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(t[i]=c[i]);u&&u(e);while(d.length)d.shift()();return r.push.apply(r,o||[]),a()}function a(){for(var t,e=0;e<r.length;e++){for(var a=r[e],i=!0,h=1;h<a.length;h++){var c=a[h];0!==n[c]&&(i=!1)}i&&(r.splice(e--,1),t=s(s.s=a[0]))}return t}var i={},n={app:0},r=[];function s(e){if(i[e])return i[e].exports;var a=i[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.m=t,s.c=i,s.d=function(t,e,a){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)s.d(a,i,function(e){return t[e]}.bind(null,i));return a},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/";var h=window["webpackJsonp"]=window["webpackJsonp"]||[],c=h.push.bind(h);h.push=e,h=h.slice();for(var o=0;o<h.length;o++)e(h[o]);var u=c;r.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"56d7":function(t,e,a){"use strict";a.r(e);var i=a("7c54"),n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{"margin-left":"10%"},attrs:{id:"app"}},[a("Waveform",{attrs:{canvasHeight:150}}),a("FrequencyBarGraph",{attrs:{canvasHeight:250}}),a("Spectrogram",{attrs:{canvasHeight:250}})],1)},r=[],s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("h1",[t._v("波型圖")]),a("canvas",{attrs:{id:t._uid,width:t.canvasWidth,height:t.canvasHeight}})])},h=[],c=(a("9fb0"),{name:"Waveform",props:{canvasWidth:{type:Number,default:750},canvasHeight:{type:Number,default:500},fillStyle:{type:String,default:"rgba(0,0,0)"},strokeStyle:{type:String,default:"rgb(255, 255, 255)"}},data:function(){return{}},methods:{draw:function(){requestAnimationFrame(this.draw),this.analyser.getByteTimeDomainData(this.dataArray),this.canvasCtx.fillStyle=this.fillStyle,this.canvasCtx.fillRect(0,0,this.canvasWidth,this.canvasHeight),this.canvasCtx.lineWidth=2,this.canvasCtx.strokeStyle=this.strokeStyle,this.canvasCtx.beginPath();let t=1*this.canvasWidth/this.bufferLength,e=0;for(let a=0;a<this.bufferLength;a++){let i=this.dataArray[a]/128,n=i*this.canvasHeight/2;0===a?this.canvasCtx.moveTo(e,n):this.canvasCtx.lineTo(e,n),e+=t}this.canvasCtx.lineTo(this.canvas.width,this.canvas.height/2),this.canvasCtx.stroke()}},mounted:function(){navigator.mediaDevices.getUserMedia({audio:!0}).then(t=>{this.audioCtx=new(window.AudioContext||window.webkitAudioContext),this.analyser=this.audioCtx.createAnalyser(),this.source=this.audioCtx.createMediaStreamSource(t),this.source.connect(this.analyser),this.analyser.fftSize=2048,this.bufferLength=this.analyser.frequencyBinCount,this.dataArray=new Uint8Array(this.bufferLength),this.canvas=document.getElementById(this._uid),this.canvasCtx=this.canvas.getContext("2d"),this.canvasCtx.clearRect(0,0,this.canvasWidth,this.canvasHeight),this.draw()}).catch((function(t){console.error(t)}))}}),o=c,u=a("d306"),l=Object(u["a"])(o,s,h,!1,null,null,null),d=l.exports,f=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("h1",[t._v("頻率圖")]),a("canvas",{attrs:{id:t._uid,width:t.canvasWidth,height:t.canvasHeight}})])},v=[],y={name:"FrequencyBarGraph",props:{canvasWidth:{type:Number,default:750},canvasHeight:{type:Number,default:500},fillStyle:{type:String,default:"rgba(0,0,0)"},strokeStyle:{type:String,default:"rgb(255, 255, 255)"}},data:function(){return{}},methods:{map:function(t,e,a,i,n){return(t-e)*(n-e)/(a-e)+i},draw:function(){requestAnimationFrame(this.draw),this.analyser.getByteFrequencyData(this.dataArray),this.canvasCtx.fillStyle=this.fillStyle,this.canvasCtx.fillRect(0,0,this.canvasWidth,this.canvasHeight);for(var t=this.canvasWidth/this.bufferLength,e=0,a=0;a<this.bufferLength;a++){let i=this.dataArray[a],n=this.map(i,0,255,0,this.canvasHeight);this.canvasCtx.fillStyle=`rgb(${i},0,${i})`,this.canvasCtx.fillRect(e,this.canvasHeight-n,t,n),e+=t+1}}},mounted:function(){navigator.mediaDevices.getUserMedia({audio:!0}).then(t=>{this.audioCtx=new(window.AudioContext||window.webkitAudioContext),this.analyser=this.audioCtx.createAnalyser(),this.source=this.audioCtx.createMediaStreamSource(t),this.source.connect(this.analyser),this.analyser.fftSize=256,this.bufferLength=this.analyser.frequencyBinCount,this.dataArray=new Uint8Array(this.bufferLength),this.canvas=document.getElementById(this._uid),this.canvasCtx=this.canvas.getContext("2d"),this.canvasCtx.clearRect(0,0,this.canvasWidth,this.canvasHeight),this.draw()}).catch((function(t){console.error(t)}))}},g=y,p=Object(u["a"])(g,f,v,!1,null,null,null),m=p.exports,b=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("h1",[t._v("時頻譜")]),a("canvas",{attrs:{id:t._uid,width:t.canvasWidth,height:t.canvasHeight}})])},x=[],w={name:"Spectrogram",props:{canvasWidth:{type:Number,default:750},canvasHeight:{type:Number,default:500},fillStyle:{type:String,default:"rgba(0,0,0)"}},data:function(){return{dataArray:[],dataArrayHistory:[]}},methods:{draw:function(){requestAnimationFrame(this.draw),this.analyser.getByteFrequencyData(this.dataArray),this.dataArrayHistory.push(this.dataArray.slice()),this.dataArrayHistory.length>256&&this.dataArrayHistory.shift(),this.canvasCtx.fillStyle=this.fillStyle,this.canvasCtx.fillRect(0,0,this.canvasWidth,this.canvasHeight);let t=this.canvasWidth/this.bufferLength,e=this.canvasHeight/256;for(var a=0;a<this.dataArrayHistory.length;a++)for(var i=0;i<this.dataArrayHistory[a].length;i++){let n=this.dataArrayHistory[a][i];this.canvasCtx.fillStyle=`rgb(${n},0,${n})`,this.canvasCtx.fillRect(i*t,a*e,t,e)}}},mounted:function(){navigator.mediaDevices.getUserMedia({audio:!0}).then(t=>{this.audioCtx=new(window.AudioContext||window.webkitAudioContext),this.analyser=this.audioCtx.createAnalyser(),this.source=this.audioCtx.createMediaStreamSource(t),this.source.connect(this.analyser),this.analyser.fftSize=256,this.bufferLength=this.analyser.frequencyBinCount,this.dataArray=new Uint8Array(this.bufferLength),this.canvas=document.getElementById(this._uid),this.canvasCtx=this.canvas.getContext("2d"),this.canvasCtx.clearRect(0,0,this.canvasWidth,this.canvasHeight),this.draw()}).catch((function(t){console.error(t)}))}},C=w,S=Object(u["a"])(C,b,x,!1,null,null,null),A=S.exports,H={name:"App",components:{Waveform:d,FrequencyBarGraph:m,Spectrogram:A}},_=H,W=(a("fb73"),Object(u["a"])(_,n,r,!1,null,null,null)),O=W.exports;i["a"].config.productionTip=!1,new i["a"]({render:t=>t(O)}).$mount("#app")},bb06:function(t,e,a){},fb73:function(t,e,a){"use strict";a("bb06")}});
//# sourceMappingURL=app.73bca10d.js.map